今日工作：

看RICHL-WEB代码

这个项目的编码风格严重不统一，有用最老版的class声明组件，也有函数式声明，用function和箭头。

因为大量使用class，所以几乎没有hook，但是现在class声明组件是不被推荐的，因为hook代码更简明好用，几乎完全代替了过去redux的功能，而且不用再对component的生命周期函数进行重写。

和潘树芝老师开了个zoom视频会议，了解到了项目的由来，更改了axios配置，使其可以连接到SK的服务器了。

这个项目安装了大量没有被使用到的库。而且几乎所有路由组件，React相关组件都是已经被官方淘汰的写法。

这个项目还有很多文件从未被调用过，如server.js。

学习Spring框架

Spring Scope

①  默认的作用域是单例的，即注入时默认情况下都是同一个bean

②  @Scope
(ConfigurableBeanFactory.SCOPE_PROTOTYPE)会将这个注入的bean改成原型

Bean生命周期

@PostConstruct在对象创建后立即执行。@PreDestroy在对象销毁后立即执行

①  实例化：Spring通过Bean工厂或应用上下文实例化Bean，通过构造函数或工厂方法创建Bean实例。

②  属性赋值：Spring将配置文件中的属性值或注解中的属性值赋值给Bean实例的属性。

③  BeanPostProcessor的前置处理：在实例化和属性赋值之后，Spring会执行所有已注册的BeanPostProcessor的前置处理方法，例如在Bean初始化之前执行一些自定义逻辑。

④  初始化：当所有的属性都被赋值之后，Spring会调用Bean的初始化方法，可以在Bean中使用@PostConstruct注解标记一个初始化方法。在该阶段，也可以使用BeanPostProcessor的后置处理方法对Bean进行定制化处理。

⑤  使用：Bean实例被放入Spring容器中，可以被其他对象引用和使用。

⑥  销毁：当Bean不再被需要时，Spring会调用Bean的销毁方法进行资源释放等操作，可以在Bean中使用@PreDestroy注解标记一个销毁方法。

**需要注意的是，Spring****容器并不会对所有的Bean****都执行销毁方法。只有在Bean****被声明为prototype****作用域时，Spring****容器才不会调用Bean****的销毁方法，因为prototype****作用域的Bean****是非单例的，它们的生命周期由客户端代码控制。**

Bean配置

@Bean通常和@Configuration一起使用，用来修饰方法，每个@Bean方法都会被Spring调用一次，并将其返回的对象注册为一个Bean。和@Component不同，Component是用来修饰类的。

Hibernate

Spring & Spring boot 源码

Spring framework中spring-context/src/main/java/org/springframework/context/annotation/Configuration.java定义了proxyBeanMethods和enforceUniqueMethods注解属性，默认返回值都为true。Java中注解中定义的方法被称为注解属性，常写做

```
public @interface MyAnnotation {String value();intcount();}
@MyAnnotation(value = "hello", count = 42)
```


员工培训：

docker

微服务：对项目进行抽象，分层。

课上问题：如果数据库break down了，怎么办？

解决方法：数据库分片（其实在Ethereum2.0版本也引入了分片机制，这样增大了区块链记录交易的吞吐量）

**分片的好处**

对数据库进行分片的主要吸引力在于它可以帮助促进水平扩展，也称为向外扩展。水平扩展是向现有堆栈添加更多机器以分散负载并允许更多流量和更快处理的做法。这通常与垂直扩展形成对比，也称为向上扩展，它涉及升级现有服务器的硬件，通常通过添加更多
RAM 或 CPU。

在一台机器上运行一个关系数据库并根据需要通过升级其计算资源来扩展它是相对简单的。不过，最终，任何非分布式数据库在存储和计算能力方面都会受到限制，因此能够自由地横向扩展会让您的设置更加灵活。

一些人可能选择分片数据库架构的另一个原因是为了加快查询响应时间。通过将一个表分成多个表，查询必须遍历更少的行并且它们的结果集返回得更快。

分片还可以通过减轻中断的影响来帮助提高应用程序的可靠性。如果您的应用程序或网站依赖于未分片的数据库，则中断有可能使整个应用程序不可用。但是，对于分片数据库，中断可能只会影响单个分片。尽管这可能会使某些用户无法使用应用程序或网站的某些部分，但总体影响仍然小于整个数据库崩溃的影响。

**分片的缺点**

人们遇到分片的第一个困难是正确实施分片数据库架构的绝对复杂性。如果操作不当，分片过程会导致数据丢失或表损坏的风险很大。但是，即使正确完成，分片也可能对您团队的工作流程产生重大影响。用户必须跨多个分片位置管理数据，而不是从单个入口点访问和管理一个人的数据，这可能会对某些团队造成破坏。

用户在对数据库进行分片后有时会遇到的一个问题是分片最终变得不平衡。数据库可能需要修复和重新分片以实现更均匀的数据分布。

另一个主要缺点是，一旦数据库被分片，就很难将其恢复到未分片的架构。在分片之前对数据库进行的任何备份都不会包括自分区以来写入的数据。

最后一个要考虑的缺点是，并非每个数据库引擎都原生支持分片。例如，PostgreSQL 不包括自动分片功能，分片通常需要“自己动手”的方法。这意味着分片文档或故障排除技巧通常很难找到。

DevOps：运维早期介入

明日展望：

找到Spring中实现加载配置文件的源码，了解Configuration是如何被Spring加载的

继续学习Spring框架

继续读RICHL-WEB，思考将其代码更新。

查询微服务中的限流，降级，熔断
